---
author: xnzone 
title: 手把手写操作系统
date: 2021-09-10 10:23:32
image: /covers/os-tutorial.png
cover: true
weight: 2
tags: ["tutorial", "os"]
---

>翻译自[os-tutorial](https://github.com/cfenollosa/os-tutorial)

## 操作系统教程

怎么使用`scratch`开发一个操作系统！

我常常想去学习怎么使用`scratch`开发一个操作系统。在大学，我学习了怎么实现高级特征(分页，信号量，内存管理等)，但是:

- 我从来没有从我自己的启动扇区开始过
- 大学课程很难，所以我没有办法记住大多数的知识点
- 一些人觉得阅读很早的现存内核，甚至是很小的，是一个不错学习操作系统的方法

由[这个文档](http://www.cs.bham.ac.uk/~exr/lectures/opsys/10_11/lectures/os-dev.pdf)和[OSDev wiki](http://wiki.osdev.org/)启发，我尝试使用短的一步一步`READMEs`和代码样例，以便于可以跟着做下去。老实说，这个教程是第一个文档的基础版，但是被划分到更小的部分，并且去掉了理论部分

更新：更多参考资料:[the little book about OS development](https://littleosbook.github.io/), [JamesM's kernel development tutorials](https://web.archive.org/web/20160412174753/http://www.jamesmolloy.co.uk/tutorial_html/index.html)

## 特征

- 这个课程是一个为初级计算机人员准备的代码教程。例如，对操作系统好奇但是没有时间或意志力从头到尾去阅读Linux内核的程序员
- 有一小部分理论知识。谷歌是你理论老师，一旦你从大学毕业，过多的理论比没有理论更糟糕，因为它会让事情变得更加困难
- 课程简单。可能需要花费5-15分钟完成它，相信我且相信你自己，你可以做到的

## 如何使用这个教程

- 从第一个文件夹开始依次往下。后面的代码是建立在之前的代码基础上的，所以如果你跳到`05`文件夹并且不知道为什么会有`mov ah, 0x0e`,那是因为你跳过了`02`小节。实际上，你可以跳过一些章节，如果你已经知道了
- 打开`README`并且从第一行开始阅读，最开始会给出你应该熟悉的概念，在开始阅读代码之前，你必须了解这些概念的细节。可以使用谷歌那些你不熟悉的概念。然后就是每一课的目标，其中解释了为什么要做和要做什么。这是因为为什么比怎么做更重要
- 阅读`README`剩余的部分，它非常简洁明了
- (可选的)在你阅读`README`之前，你可以尝试写自己的代码
- 查看代码案例，它们已经注释过了
- (可选的)运行并且实验。验证你完全理解的最好办法就是破坏它或者用不同的方式复制它

TL;DR:首先阅读每个文件夹的`README`，然后是代码文件。如果你是勇敢，尝试自己写代码

## 策略

我们想在我们自己操作系统上做的事：

- 从`scratch`开始启动，不带有`GRUB`-完成！
- 进入32位模式-完成！
- 从汇编转到C-完成！
- 中断处理-完成！
- 屏幕输出和键盘输入-完成！
- 满足需要的，简短的，基本的`libc`-完成！
- 内存管理
- 写个文件系统用来保存文件
- 创建一个简单的shell
- 用户模式
- 编写一个简单的文本编辑器
- 多进程和调度

或许我们将完成这些内容，但是现在还是太早去谈论这个

如果我们足够勇敢：

- 一个基本的中断处理器，比如在70秒以内
- GUI
- 网络

## 贡献

这是一个个人学习项目，甚至没有长期更新，我仍然有希望在某个时间点完成它

非常感谢所有指出我的bug并且提交到项目的人。我需要一些时间去看这些代码，此刻我不能保证阅读它

这个代码库是完全开源的。如果你有兴趣继续这个项目，让我知道并且我会在"main fork"加上你的名字